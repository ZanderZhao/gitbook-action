{"./":{"url":"./","title":"README","keywords":"","body":"Gitbook Action This action builds and publishes a gitbook to github pages and other pages. Click here for more information. GitHub | MarketPlace | Page | Community How to Use STEP1 Add Action Add .github/workflows/gitbook-action.ymlin your repo, with following content. name: 'Gitbook Action Build' on: push: branches: - master # trigger branch jobs: build: runs-on: ubuntu-latest steps: - name: Checkout action uses: actions/checkout@v2 - name: Gitbook Action # https://github.com/ZanderZhao/gitbook-action/releases uses: ZanderZhao/gitbook-action@v1.2.4 # -> or ZanderZhao/gitbook-action@master.If not use master click above, use latest please with: # or fork this repo and use YourName/gitbook-action@master token: ${{ secrets.PERSONAL_TOKEN }} # -> remember add this in settings/secrets as following ​ Detailed step | Official introduction STEP2 Generate Token and add to Secrets Create token from https://github.com/settings/tokens choose repo click Generate token ​ Detailed step | Official introduction Add your token to https://github.com/ yourname/yourrepo /settings/secrets Name: PERSONAL_TOKEN Value: which you get before ​ Detail step | Official introduction STEP3 Choose options Set Default Above source branch is master, and the target branch is gh-pages. If gh-pages does not exist, it will be created automatically. The following are options. Option For global git_name: description: ' If git name is different with github, please add' default: GITHUB_ACTOR git_email: description: ' If git name is different with github, please add' default: **@users.noreply.github.com time_zone: description: 'System Default, if set, like Asia/Shanghai' For Source Repo source_repo: description: 'Default this GITHUB_REPOSITORY, if not please add like username/reponame ' source_token: description: 'Default token, if not please add (clone)' source_git_name: description: 'Default git_name, if not please add' source_hub: description: 'default is github.com,can be gitlib.com gitee.com ...' default: 'github.com' source_branch: description: 'Default master' default: 'master' source_dir: description: 'Where gitbook source. Default is root, if not add like mydir, instead of /mydir or mydir/' default: '/' source_edit_time: description: 'Default false, if plugins need last edit time, set true' default: false source_file_without_prefix: description: 'Default true, if you want to ignore file without prefix please set false' default: true For Publish Repo publish_repo: description: 'Default this GITHUB_REPOSITORY, if not please add like username/reponame' publish_token: description: 'Default token, if not please add (clone push)' publish_git_name: description: 'Default git_name, if not please add' publish_git_email: description: 'Default git_email, if not please add' publish_commit_message: description: 'Default Updated by gitbook-action and time, can use last commit message' Tip: can set github.event.head_commit.message as last commit message example1 publish_hub: description: 'Default is github.com,can be gitlib.com gitee.com ...' default: 'github.com' publish_branch: description: 'Defaule is gh-pages, auto create' default: 'gh-pages' publish_dir: description: 'Default is root, if not add like docs ...' default: '/' publish_commit_history: description: 'set false will only one commit at publish_repo' default: true publish_cname: description: 'Default null' default: 'null' publish_nojekyll: description: 'Default false, if set true, it will add .nojekyll for publish' default: 'false' publish_push_force: description: 'Default false. Set true will enable git push force' default: false publish_remove_last_build: description: 'Default true. Set false not remove last build but rewrite same file' default: true For Gitbook Setting gitbook_cli_version: description: 'Default is 2.3.2' default: '2.3.2' gitbook_version: description: 'Default is 3.2.3' default: '3.2.3' gitbook_pdf: description: 'Set true will generate pdf file' default: false gitbook_pdf_dir: description: 'Where the pdf to put. Default mybook, can change / for root, or myebook' default: 'mybook' gitbook_pdf_name: description: 'The name of your pdf. Default ebook' default: 'ebook' gitbook_epub: description: 'Set true will generate epub file' default: false gitbook_epub_dir: description: '' default: 'mybook' gitbook_epub_name: description: '' default: 'ebook' gitbook_mobi: description: 'Set true will generate mobi file' default: false gitbook_mobi_dir: description: '' default: 'mybook' gitbook_mobi_name: description: '' default: 'ebook' font_install description: 'Install font for pdf, Not install any font, maybe affect the pdf/mobi/epub, can add font_install at book.json' example: sudo apt-get install fonts-noto-cjkorsudo apt-get install ttf-mscorefonts-installer,use sudo install for global. not_clean description: 'Default false. Set true will not remove working file when the workflow finish, if you set cache' prepare_install description: 'Some install for prepare, such as dependency, golbal setting' example: npm i --unsafe-perm -g svgexport@0.3.2,install specific svgexport version for converting svg. For other repo For Source2 repo source2_repo: description: 'Default null, if use please add like username/reponame, (same with source will replace, different will mix)' default: 'null' source2_git_name: description: 'Default git_name, if not please add' source2_token: description: 'Default token, if not please add (clone)' source2_hub: description: '' default: 'github.com' source2_branch: description: '' default: 'master' source2_dir: description: '' default: '/' source2_edit_time: description: 'Default false if plugins need last edit time, set true' default: false source2_file_without_prefix: description: 'Default true, if you want to ignore file without prefix please set false' default: true For Publish2 repo publish2_repo: description: 'Default null, if use please add like username/reponame' default: 'null' publish2_git_name: description: 'Default git_name, if not please add' publish2_token: description: 'Default token, if not please add (clone push)' required: 'false' publish2_git_email: description: 'Default git_email, if not please add' publish2_commit_message: description: 'Default Updated by gitbook-action and time' publish2_hub: description: '' default: 'github.com' publish2_branch: description: 'Default gh-pages' default: 'gh-pages' publish2_dir: description: '' default: '/' publish2_cname: description: 'Default null' default: 'null' publish2_push_force: description: 'Default false. Set true will enable git push force' default: false publish_remove_last_build: description: 'Default true. Set false not remove last build but rewrite same file' default: true publish2_commit_history: description: 'set false will only one commit at publish2_repo' default: true publish2_nojekyll: description: 'Default false, if set true, it will add .nojekyll for publish2' default: 'false' For Publish3 repo publish3_git_name: description: 'Default git_name, if not please add' publish3_token: description: 'Default token, if not please add (clone push)' publish3_git_email: description: 'Default git_email, if not please add' publish3_commit_message: description: 'Default Updated by gitbook-action and time' publish3_hub: description: '' default: 'github.com' publish3_repo: description: 'Default null, if use please add like username/reponame' default: 'null' publish3_branch: description: 'Default gh-pages' default: 'gh-pages' publish3_dir: description: 'Default root' default: '/' publish3_cname: description: 'Default null' default: 'null' publish3_push_force: description: 'Default false. Set true will enable git push force' default: false publish_remove_last_build: description: 'Default true. Set false not remove last build but rewrite same file' default: true publish3_commit_history: description: 'set false will only one commit at publish3_repo' default: true publish3_nojekyll: description: 'Default false, if set true, it will add .nojekyll for publish3' default: 'false' Example name: 'Gitbook-Action' on: push: branches: - master jobs: build: runs-on: ubuntu-latest steps: - name: Checkout action uses: actions/checkout@v1 # example1--> https://ZanderZhao.github.io/gitbook-action - name: Gitbook Action uses: zanderzhao/gitbook-action@v1.2.4 # https://github.com/ZanderZhao/gitbook-action/releases with: # Just example, click above, use latest please token: ${{ secrets.PERSONAL_TOKEN }} time_zone: Asia/Shanghai # set time zone source_dir: source # clone from source source_edit_time: true # source time publish_commit_message: ${{ github.event.head_commit.message }} # use last commit message # example2--> https://ZanderZhao.github.io/gitbook-action/gitbook-docs - name: Gitbook Action uses: zanderzhao/gitbook-action@v1.2.4 with: token: ${{ secrets.PERSONAL_TOKEN }} time_zone: Asia/Shanghai source_repo: GitbookIO/gitbook # clone from https://github.com/GitbookIO/gitbook.git source_branch: master # clone source master source_dir: docs # gitbook-sorce at dir:docs publish_dir: gitbook-docs # publish for this repo dir:gitbook-docs publish2_repo: gitbook-org/gitbook # publish for another repo dir default root FAQ ERROR WARNING Q&A About last edit time How to keep the last edit time ? Add source_edit_time: true About CNAME How to add CNAME ? Add publish_cname: www.example.com And add two CNAME like publish_cname: example.com www.example.com example.com and www.example.comshould have space. Github pages: custom-domain-names-that-are-unsupported About PDF/EPUB/MOBI How to build pdf ? Add gitbook_pdf: true You can choose gitbook_pdf_dir and gitbook_pdf_name Detail Why the font format is wrong ? You need install font, add font_install example: font_install: sudo apt-get install fonts-noto-cjkorfont_install: sudo apt-get install ttf-mscorefonts-installer,use sudo install for global. About source_repo source_repo is the repo where gitbook-source(SUMMARY.md README.md) deposit you can set source_repo、 source_branchandsource_dir example: https://github.com/GitbookIO/gitbook/tree/master/docs source_repo: GitbookIO/gitbook source_branch: master source_dir: docs About publish_repo publish_repo is the file gitbook build push to you can set publish_repo、publish_branchandpublish_dir This action only change the file in publish_dir About work Pull docker from docker In which Gitbook and Tools has installed Clone from publish If exists publish2 and publish3 Then clone publish2 and publish3 Mix publish, publish2 and publish3 together Build If exists plugins install plugins if need pdf if set font install font if you set before build pdf Publish Publish to publish_repo If exists publish2 or publish3, then publish Clean It will clean all things, If you need cache can set false, and you can find detail in OPTION above Community Gitter External links https://github.com/marketplace/actions/gitbook-action https://github.com/marketplace/actions/github-pages-action https://github.com/marketplace/actions/publish-gitbook https://ZanderZhao.github.io/gitbook-action https://help.github.com/en/actions "},"how-to-use.html":{"url":"how-to-use.html","title":"Add Action","keywords":"","body":"STEP1 Add Action Add .github/workflows/gitbook-action.ymlin your repo, with following content. name: 'Gitbook Action Build' on: push: branches: - master # trigger branch jobs: build: runs-on: ubuntu-latest steps: - name: Checkout action uses: actions/checkout@v2 - name: Gitbook Action uses: zanderzhao/gitbook-action@v1.2.4 with: token: ${{ secrets.PERSONAL_TOKEN }} STEP2 Greate Token and add to Secrets step2.1 Create token click https://github.com/settings/tokens step2.2 Add token to repo go to https://github.com/ yourname/yourrepo /settings/secrets STEP3 Choose options Set Default Above Source branch is master, and the target branch is gh-pages. If gh-pages does not exist, it will be created automatically. More Options And Example. Introduction on https://ZanderZhao.github.io/gitbook-action/ Source repo and publish repo can be different Source git from other people Choose your own gitbook version Clean commit history Keep time setting of file ... ... "},"error.html":{"url":"error.html","title":"ERROR","keywords":"","body":"ERROR 31XX 3101 need token please need main token, which is other default token 3102 3102-2 Source git clone success, but not find gitbook-source file in dir find repo, and clone repo success, but not find gitbook-source in source_dir 3103 3103-2 3104 3104-2 3104-3 Can't find this source_repo/branch, maybe not add token or source_token(with access) in gitbook_action.yml can't git clone repo maybe not exists this source_repo or you don't add token or the token orsource_tokenwithout auth 3105 gitbook built fail,please check is there something wrong with your book.json or others What happened build fail with plugins maybe something wrong with SUMMARY.md README.md or other file TypeError: Path must be a string. Received undefined Maybe use in article, \\ or with backquote but not or wrong with book.json Maybe there are extra commas. Error: GitBook doesn't satisfy the requirements of this plugin: >=4.0.0-alpha.0 If not add \"gitbook\": \"XXX\"inbook.jsonor add gitbook_version: XXXingitbook-action.yml, default is 3.2.3, maybe your plugins need different version, can find in package.json of plugin or some plugins can't installs maybe author remove it or plugins run fail Error: Cannot find module '/github/workspace/local_source/node_modules/XXX/package.json' There something wrong with plugin, or or incompatible versions 3016 3016-2 3016-3 Can't push publish_repo/branch, maybe not add publish_token(with access) in gitbook_action.yml can't push and push force sucess maybe your token without auth to push this repo 3107 3017-2 3017-3 Can't push publish_repo/branch, maybe not add publish_token(with access) in gitbook_action.yml or try set publish_push_force true can't push sucess maybe your token without auth to push this repo or try to allow push force, add publish_push_force: true 3108 3108-2 3108-3 You set publish_commit_history:false , must set publish_push_force:true at same time clean commit need push force set publish_commit_history:false , must set publish_push_force:true at same time 3201 description Publish sucessfully, But Github pages build fail The workflows run successfully, and push for gh-pages successfully, But the github pages build failed //From Settings Your site is having problems building: Page build failed. For more information, see https://docs.github.com/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors. Why 1:There is something wrong with the page build with jekyll. 2:If you add .nojekyll in source but use the version of gitbook action is 1.2.2 or early, which use cp -rfp ./* / will ignore the .nojekyll , can cause this. How to Fix step1 use zanderzhao/gitbook-action@master or zanderzhao/gitbook-action@v1.2.4 or latest step2 add.nojekyll in source or add publish_nojekyll: true at action config "},"warning.html":{"url":"warning.html","title":"WARNING","keywords":"","body":"WARNING 33XX 3301 Source2 git success. It will replace what we git before, when have same file Just Emphasize If source/dir and source2/dir have file with same name, will only source2 left If diffenent , both left They build together as one gitbook-source, not replace 3302 3302-2 3302-3 Can't find this publish_branch, but find this repo, we checkout new branch clone this repo sucess but there no publish_branch create new branch sucess 3303 gitbook built fail, maybe need some file or plugins, now we try again Just Emphasize build without plugins fail next will try to build again with plugins 3304 Remove the CNAME(from source or source2), if need cname please add in gitbook_action.yml publish_cname:value Just Emphasize if source has CNAME, here will remove if use CNAME, can add publish_cname: valuein action.yml 3305-0 Just tell you, You ALLOW PUSH FORCE If work with others, try avoid it. 3305 3305-2 3305-3 Can't push publish_repo/branch, try push force Just Emphasize you allow push force, and now can push normal success next will try to push force 3306 3306-2 3306-3 Push force success Just Emphasize here publish force 3307 NOT_CLEAN set true, if two gitbook-action in one workflow may run fatal. If don't use cache, (source build file-->node_modules), please set false(Default), and CLEAN is not remove gitbook-cli and gitbook Just Emphasize if two gitbook-action in one workflow may run fatal. If don't use cache, (source build file-->node_modules), please set false(Default) CLEAN is not remove gitbook-cli and gitbook 3308 Not install any font, maybe affect the pdf/mobi/epub, can add font_install at book.json If you use pdf/epub/mobi without installing any font may create fail. You can use like font_install: sudo apt-get install fonts-noto-cjkto install the font you need in pdf. Not limited to this, remember install for global. "}}